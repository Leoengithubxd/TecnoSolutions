@{
    ViewBag.Title = "AddProducts";
    Layout = "~/Views/Shared/_LayoutAnalista.cshtml";
}
@model List<TecnoSolutions.Dtos.Product>

<h2>Products</h2>

@if (Model == null || !Model.Any())
{
    <p>No products available.</p>
}
else
{
    <form method="post" action="@Url.Action("GenerateReport", "Product")">
        <table class=" table table-container">
            <thead class=" table table-primary">
                <tr>

                    <th>Name</th>
                    <th>Stock</th>
                    <th>Unit Price</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var Product in Model)
                {
                    <tr id="Product-@Product.IdProduct">

                        <td>@Product.Name</td>
                        <td>@Product.Stock</td>
                        <td>@Product.UnitPrice</td>
                        <td>
                            <a href="@Url.Action("Edit", new { id = Product.IdProduct })" class="btn btn-primary btn-sm">
                                <i class="bi bi-pencil"></i> Edit
                            </a> |
                            <button type="button" class="btn btn-danger btn-sm delete-product" data-id="@Product.IdProduct">
                                <i class="bi bi-trash"></i> Delete
                            </button>
                        </td>



                    </tr>
                }
            </tbody>
        </table>

    </form>
}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
        $(document).ready(function () {
            $('.delete-product').click(function () {
                var productId = $(this).data('id');
                if (confirm('¿Estás seguro de que deseas eliminar este producto?')) {
                    $.ajax({
                        url: '@Url.Action("Delete", "Product")',
                        type: 'POST',
                        data: { id: productId },
                        success: function (result) {
                            // Eliminar la fila del producto de la tabla
                            $('#Product-' + productId).remove();
                            alert('Producto eliminado con éxito.');
                        },
                        error: function (xhr, status, error) {
                            alert('Error al eliminar el producto: ' + error);
                        }
                    });
                }
            });
        });
</script>

<style>
    body {
        background-color: #f4f4f9;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .table-primary {
        --bs-table-bg: #0d3039;
        --bs-table-color: whitesmoke;
    }

    .table-container {
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        background-color: #091324;
    }

    .header-title {
        font-size: 28px;
        color: #0d6efd;
        text-align: center;
        margin-bottom: 20px;
        background-color: #0d3039;
        padding: 10px;
        border-radius: 10px;
    }

    .btn-primary, .btn-success, .btn-danger {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s;
        border: none;
    }

    .btn-primary {
        background-color: #0d3039;
        color: whitesmoke;
    }

        .btn-primary:hover {
            background-color: #091021;
        }



    .btn-danger {
        background-color: #dc3545;
    }

        .btn-danger:hover {
            background-color: #bb2d3b;
        }

    .text-principal {
        color: whitesmoke;
    }

    .alert-danger {
        border-radius: 8px;
    }

    .btn-info {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        background-color: #17a2b8;
        color: whitesmoke;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s;
    }

        .btn-info:hover {
            background-color: #138496;
        }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
